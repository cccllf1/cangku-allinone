# PDA扫码助手 Chrome插件

## 功能介绍

这个Chrome插件可以：
- 自动接收PDA扫码系统的扫码数据
- 将扫码数据自动输入到当前页面光标所在的位置
- 智能识别各种输入框类型（文本框、搜索框、文本区域等）
- 在找不到输入框时显示通知并复制到剪贴板

## 安装方法

1. 打开Chrome浏览器，输入 `chrome://extensions/`
2. 开启右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `chrome-extension` 文件夹
5. 插件安装完成，会在工具栏显示📱图标

## 使用方法

### 1. 启用插件
- 点击工具栏的📱图标打开插件面板
- 确保状态显示为"✅ 已启用"
- 如果显示"❌ 已禁用"，点击"🟢 启用插件"按钮

### 2. 使用扫码数据输入
1. 在任意网页的输入框中点击，让光标获得焦点
2. 在PDA系统中扫码（`http://192.168.11.252:8610/pda-app.html`）
3. 扫码数据会自动出现在光标位置

### 3. 智能输入识别
插件支持以下输入元素：
- `<input type="text">` - 文本输入框
- `<input type="search">` - 搜索框
- `<input type="email">` - 邮箱输入框
- `<input type="tel">` - 电话号码输入框
- `<textarea>` - 多行文本区域
- `[contenteditable="true"]` - 可编辑的div元素

### 4. 插件面板功能
- **状态指示器**：显示插件当前状态（启用/禁用）
- **🔴/🟢 启用/禁用按钮**：切换插件开关
- **🌐 打开PDA页面**：快速跳转到PDA扫码系统
- **🧪 测试连接**：检查与PDA服务器的连接状态

## 工作原理

1. **后台轮询**：插件每2秒查询PDA API (`http://192.168.11.252:8611/api/scan-results`)
2. **新数据检测**：比较扫码记录数量，发现新增时获取最新条目
3. **智能输入**：
   - 优先在当前焦点的输入框中插入
   - 如果没有焦点，自动寻找页面中第一个可见输入框
   - 都找不到时显示通知并复制到剪贴板
4. **视觉反馈**：输入成功时显示绿色边框动画

## 权限说明

插件需要以下权限：
- `activeTab`：访问当前标签页，用于插入扫码数据
- `storage`：存储插件设置
- `background`：后台运行，持续监听扫码数据
- `host_permissions`：访问PDA服务器API

## 故障排除

### 插件无法接收扫码数据
1. 检查PDA服务器是否正常运行
2. 确保URL `http://192.168.11.252:8611/api/scan-results` 可以访问
3. 在插件面板点击"🧪 测试连接"检查连接状态

### 扫码数据未自动输入
1. 确保目标页面有可输入的元素
2. 点击输入框让光标获得焦点
3. 检查浏览器控制台是否有错误信息

### 插件图标未显示
1. 确认插件已正确安装并启用
2. 检查Chrome的扩展程序页面
3. 重新加载插件或重启浏览器

## 技术特点

- **实时监听**：2秒轮询间隔，快速响应新扫码
- **智能识别**：支持多种输入元素类型
- **优雅降级**：找不到输入框时自动复制到剪贴板
- **视觉反馈**：成功输入时的动画效果
- **错误处理**：网络异常时的优雅处理

## 系统要求

- Chrome 88+ 或基于Chromium的浏览器
- 能够访问内网PDA服务器 `192.168.11.252`
- 支持Manifest V3的浏览器版本 